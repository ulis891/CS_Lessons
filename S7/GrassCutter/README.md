# Газонокосилка #

**Описание задачи:** Есть прямоугольное поле, обнесенное забором, на котором растет трава и валяются камни. По нему ездит газонокосилка. Газонокосилке нужно скосить всю траву на поле не врезавшись в забор и не наехав на камень, иначе - она сломается. В газонокосилке, так же, есть бензин, который кончается во время работы. Одна единица бензина тратится на одно перемещение. На поле есть клетка, на которой можно заправить полный бак газонокосилке (это поле, на котором она появляется вначале). Нужно скосить все поле, не сломав газонокосилку и посчитать количество перемещений для этого.

**Идея программы:**
В качестве поля работы будем использовать двумерный массив pole[]. Его размер установим равным количеству строк в терминале по вертикали и половину количества столбцов в терминале по горизонтали. Значения элементов массива будут такие:

*значение элементов массива:*

+ 0 - клетка с травой, которую еще не скосили  - [!]
+ 1 - скошенная клетка                         - [ ]
+ 2 - камень                                   - [@]
+ 3 - забор                                    - [X]
+ 4 - газонокосилка                            - [Q]
+ 5 - клетка - заправка                        - [F]

Будем рисовать текущую ситуацию на поле в цикле, пока не нажмем клавишу выхода (кнопка "Q"), или программа не закончится (скошено все поле, косилка сломалась - врезалась в забор или наехала на камень, или у нее кончился бензин).

Не будем сильно заморачиваться с алгоритмом работы газонокосилки. Напишем функцию поиска любого первого нескошенного участка поля, которая будет устанавливать цель для движения косилки в нужную нам точку поля.

Так же напишем функцию, которая будет указывать в какую сторону на данном этапе газонокосилке надо двигаться. Вычислять будем как представления прямоугольного треугольника, гипотенуза которого есть вектор между точкой-цели, к которой нужно приехать, и точкой поля, в которой на данный момент газонокосилка находится. Идем в ту сторону, где катет нашего прямоугольного треугольника больше.

Так же в программе есть служебные функции по отрисовке поля, проверки возможности шагнуть в нужном направлении, задания цели движения.

В самой программе изначально задаем поле для работы, обносим его забором, раскидываем камни случайным образом (пусть камней будет 1% от всех клеток поля).

Так же случайным образом выбираем место появления газонокосилки, и по совместительству, - место заправки.

Так же, перед основным циклом зададим первую цель для движения газонокосилки, и зададим направление, куда нам нужно будет ехать для достижения выбранной точки-цели.

Далее - работаем с основным циклом самой программы. 
В нем:

+ Работаем, если газонокосилка находится в рабочем режиме (она не сломана, с бензином, и есть что косить).
+ Шагаем в выбранную сторону.
+ Уменьшаем количество бензина в баке и увеличиваем сччетчик шагов.
+ Проверяем, не находимся ли мы случайно над точкой, которая объявлена заправкой. Если мы тут - то заправляем бак по полной. Тут же проверяем, случайно мы тут оказались, или ехали сюда целенаправленно. Если целенаправленно - меняем режим на движение к точки-цели.
+ Проверяем, не пора ли нам ехать на заправку. Считаем, сколько точек по горизонтали + сколько точек по вертикали нам нужно преодолеть, чтобы добраться до заправки, и сравниваем полученное число с остатком топлива в баке. Если остаток в баке равен вычисленному количеству (на самом деле страхуемся некоторым запасом топлива в баке - в моем варианте это 5 единиц - для того, чтобы объехать камень), то меняем режим на движение к заправке, сохраняем точку-цель, к которой мы двигались ранее, и точку-цель меняем на поле с заправкой. 
+ Проверяем, все ли поле скошено. Если  все - меняем режим на выход из программы.
+ Так же проверяем, достигли ли мы точки-цели. Если достигли - выбираем следующую точку-цель.

**Недостатки:**

+ В программе реализован самый простой алгоритм поиска пути (если упираемся в камень, то пытаемся делать шаг в перпендикулярном направлении). Он очень неоптимален по количеству перемещений газонокосилки (она очень много ездит по уже скошенным клеткам). Можно, конечно, реализовать алгоритм поиска пути (вроде А*), но не в этот раз.
+ Так же существует вероятность что одно поле будет окружено с четырех сторон камнями или забором (к нему никак не подобраться), то газонокосилка будет постоянно пытаться к этому полю доехать, но у нее не получится.
+ Так же, при движении на заправку газонокосилке придется объехать более одного камня, то ей не хватит бензина.
+ Наверняка есть что-то еще, но я уже пошел спать.